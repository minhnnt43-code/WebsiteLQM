<!DOCTYPE html>
<html lang="vi">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Web Cá Nhân - Lâm Quốc Minh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; scroll-behavior: smooth; }
        .card-style { background-color: #ffffff; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.05); }
        .filter-btn { background-color: #e2e8f0; color: #475569; padding: 6px 12px; border-radius: 9999px; font-weight: 500; }
        .filter-btn.active { background-color: #2563eb; color: white; }
        .tab-btn { padding: 8px 16px; cursor: pointer; border-bottom: 3px solid transparent; color: #475569; font-weight: 600; transition: all 0.2s; }
        .tab-btn.active { color: #2563eb; border-bottom-color: #2563eb; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div id="public-page" style="display: none;">
        <div class="container mx-auto p-4 md:p-8 max-w-4xl min-h-screen flex flex-col justify-center">
             <header class="text-center mb-12">
                <img src="https://drive.google.com/uc?id=1I5sJ9yGGKlrIFyjQMmLmRqETNSTfQwXM" alt="Ảnh chân dung Lâm Quốc Minh" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover border-4 border-white shadow-lg">
                <h1 class="text-4xl font-bold text-slate-900">Lâm Quốc Minh</h1>
                <p class="text-lg text-slate-500 mt-2">Sinh viên khoa Luật, Trường Đại học Kinh tế - Luật, ĐHQG-HCM</p>
            </header>
            <section class="mb-12">
                 <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <a href="tel:0899012608" class="card-style rounded-lg p-4 hover:bg-slate-50 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-2 text-blue-600"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81 .7A2 2 0 0 1 22 16.92z"></path></svg> <span class="font-semibold text-slate-800">Điện thoại</span><p class="text-sm text-slate-500">0899012608</p> </a>
                    <a href="mailto:minhlq23504b@st.uel.edu.vn" class="card-style rounded-lg p-4 hover:bg-slate-50 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-2 text-blue-600"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg> <span class="font-semibold text-slate-800">Email</span><p class="text-sm text-slate-500 truncate">minhlq23504b@st.uel.edu.vn</p> </a>
                    <a href="https://www.facebook.com/lamquocminh18" target="_blank" class="card-style rounded-lg p-4 hover:bg-slate-50 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-2 text-blue-600"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg> <span class="font-semibold text-slate-800">Facebook</span><p class="text-sm text-slate-500">lamquocminh18</p> </a>
                    <a href="https://www.instagram.com/minhlq_18/" target="_blank" class="card-style rounded-lg p-4 hover:bg-slate-50 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-2 text-blue-600"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg> <span class="font-semibold text-slate-800">Instagram</span><p class="text-sm text-slate-500">minhlq_18</p> </a>
                </div>
            </section>
            
            <section id="achievements-public" class="mb-12">
                <h2 class="text-2xl font-bold text-slate-900 mb-6 text-center">Hoạt động & Thành tích</h2>
                <div id="achievements-list-public" class="space-y-8">
                    <!-- Danh sách thành tích sẽ được tự động chèn vào đây -->
                </div>
            </section>
            
            <footer class="text-center mt-auto"> <button id="show-login-btn" class="text-blue-600 hover:text-blue-500 transition-colors">Đăng nhập quản trị</button> </footer>
        </div>
    </div>
    
    <div id="login-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div class="fixed inset-0 bg-black/50" id="login-modal-backdrop"></div>
        <div class="card-style rounded-lg p-8 w-full max-w-sm z-10">
            <h2 class="text-2xl font-bold text-slate-900 mb-6 text-center">Đăng nhập Quản trị</h2>
            <form id="login-form">
                <div class="mb-4"> <label for="username" class="block text-sm font-medium text-slate-600 mb-1">Tài khoản</label> <input type="text" id="username" class="w-full bg-slate-100 border border-slate-300 rounded-md p-2 text-slate-800" required> </div>
                <div class="mb-6"> <label for="password" class="block text-sm font-medium text-slate-600 mb-1">Mật khẩu</label> <input type="password" id="password" class="w-full bg-slate-100 border border-slate-300 rounded-md p-2 text-slate-800" required> </div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-4 rounded-lg">Đăng nhập</button>
                <p id="login-error" class="text-red-500 text-sm mt-4 text-center h-5"></p>
            </form>
        </div>
    </div>

    <div id="app-container" class="min-h-screen hidden bg-white">
         <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 sm:p-6 bg-white border-b border-slate-200 gap-4">
            <div> <h1 class="text-xl font-bold text-slate-800">Xin chào Lâm Quốc Minh, chúc bạn một ngày vui vẻ!</h1> <p id="current-time" class="text-sm text-slate-500"></p> </div>
            <button id="logout-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg text-sm w-full sm:w-auto">Đăng xuất</button>
        </header>
        <main class="p-4 sm:p-6 lg:p-8">
            <div class="mb-6">
                <nav class="flex space-x-2 sm:space-x-4 border-b border-slate-200">
                    <button data-tab="cong-viec" class="tab-btn active">Công việc</button>
                    <button data-tab="thanh-tich" class="tab-btn">Thành tích</button>
                </nav>
            </div>
            <div id="tab-content">
                <div id="cong-viec-content" class="tab-pane">
                    <!-- Khu vực công việc giữ nguyên -->
                </div>
                
                <div id="thanh-tich-content" class="tab-pane hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="card-style p-6 rounded-lg">
                            <h2 class="text-2xl font-bold text-slate-800">Thêm Thành tích Mới</h2>
                            <form id="achievement-form" class="mt-4 space-y-4">
                                <div><label for="achievement-title" class="block text-sm font-medium text-slate-600 mb-1">Tiêu đề thành tích</label><input type="text" id="achievement-title" class="w-full bg-slate-100 border-slate-300 rounded-md p-2" required></div>
                                <div><label for="achievement-description" class="block text-sm font-medium text-slate-600 mb-1">Mô tả</label><textarea id="achievement-description" rows="4" class="w-full bg-slate-100 border-slate-300 rounded-md p-2" required></textarea></div>
                                <!-- ================== KHU VỰC ĐÃ NÂNG CẤP ================== -->
                                <div>
                                    <label for="achievement-image-url" class="block text-sm font-medium text-slate-600 mb-1">Link Chia sẻ Ảnh Google Drive</label>
                                    <input type="url" id="achievement-image-url" class="w-full bg-slate-100 border-slate-300 rounded-md p-2 font-mono text-sm" placeholder="https://drive.google.com/file/d/..." required>
                                    <p class="text-xs text-slate-500 mt-1">
                                        Hướng dẫn: Nhấp chuột phải vào ảnh trên Drive -> Chia sẻ -> Sao chép đường liên kết và dán vào đây.
                                    </p>
                                </div>
                                <!-- ========================================================= -->
                                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-4 rounded-lg">Thêm thành tích</button>
                            </form>
                        </div>
                        <div class="card-style p-6 rounded-lg">
                            <h2 class="text-2xl font-bold text-slate-800">Danh sách Thành tích</h2>
                            <div id="achievements-list-admin" class="mt-4 space-y-4 max-h-[60vh] overflow-y-auto pr-2"></div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>
    
    <div id="confirm-modal"><!-- Modal xác nhận giữ nguyên --></div>
    <div id="notification-toast"><!-- Toast giữ nguyên --></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const publicPage = document.getElementById('public-page'); const appContainer = document.getElementById('app-container'); const showLoginBtn = document.getElementById('show-login-btn'); const loginModal = document.getElementById('login-modal'); const loginModalBackdrop = document.getElementById('login-modal-backdrop'); const loginForm = document.getElementById('login-form'); const usernameInput = document.getElementById('username'); const passwordInput = document.getElementById('password'); const loginError = document.getElementById('login-error'); const logoutBtn = document.getElementById('logout-btn'); const currentTimeEl = document.getElementById('current-time'); const taskFilters = document.getElementById('task-filters'); const notificationToast = document.getElementById('notification-toast'); const notificationText = document.getElementById('notification-text'); const tabBtns = document.querySelectorAll('.tab-btn'); const tabPanes = document.querySelectorAll('.tab-pane');
        const taskForm = document.getElementById('task-form'); const taskTextInput = document.getElementById('task-text-input'); const categoryInput = document.getElementById('category-input'); const priorityInput = document.getElementById('priority-input'); const startDateTimeInput = document.getElementById('start-datetime-input'); const endDateTimeInput = document.getElementById('end-datetime-input'); const taskList = document.getElementById('task-list');
        const achievementsListPublic = document.getElementById('achievements-list-public'); const achievementsListAdmin = document.getElementById('achievements-list-admin'); const achievementForm = document.getElementById('achievement-form'); const achievementTitleInput = document.getElementById('achievement-title'); const achievementDescriptionInput = document.getElementById('achievement-description');
        // Thay đổi ID input
        const achievementImageUrlInput = document.getElementById('achievement-image-url'); 
        const confirmModal = document.getElementById('confirm-modal'); const confirmModalTitle = document.getElementById('confirm-modal-title'); const confirmModalText = document.getElementById('confirm-modal-text'); const confirmModalCancel = document.getElementById('confirm-modal-cancel'); const confirmModalOk = document.getElementById('confirm-modal-ok');
        
        let appState = { tasks: [], achievements: [] };
        const STORAGE_KEY = 'minhWebApp_localStorage_final_v2'; // Key mới

        const saveStateToStorage = () => { localStorage.setItem(STORAGE_KEY, JSON.stringify(appState)); };
        const loadStateFromStorage = () => { const dataString = localStorage.getItem(STORAGE_KEY); if (dataString) { const loadedState = JSON.parse(dataString); appState.tasks = loadedState.tasks || []; appState.achievements = loadedState.achievements || []; } else { appState.achievements = [{id: Date.now() + 1, title: 'Chiến sĩ hoàn thành xuất sắc nhiệm vụ Chiến dịch Mùa hè xanh 2025', description: 'Chiến sĩ hoàn thành xuất sắc nhiệm vụ Chiến dịch Mùa hè xanh 2025', imageId: '12-wT41fQ47KypmgXKvSAi7PjA8MvWnUv'}];} renderTasks(); renderAchievements();};
        const handleLogin = (e) => { e.preventDefault(); if (usernameInput.value === 'lamquocminh' && passwordInput.value === 'lamquocminh') { sessionStorage.setItem('isAdminLoggedIn', 'true'); checkLoginState(); loginModal.classList.add('hidden'); loginForm.reset(); loginError.textContent = ''; } else { loginError.textContent = 'Tài khoản hoặc mật khẩu không đúng.'; }};
        const handleLogout = () => { sessionStorage.removeItem('isAdminLoggedIn'); checkLoginState(); };
        const checkLoginState = () => { if (sessionStorage.getItem('isAdminLoggedIn') === 'true') { publicPage.style.display = 'none'; appContainer.style.display = 'block'; startClock(); } else { publicPage.style.display = 'block'; appContainer.style.display = 'none'; } loadStateFromStorage(); };
        const showLoginModal = () => loginModal.classList.remove('hidden'); const hideLoginModal = () => loginModal.classList.add('hidden');
        const startClock = () => { const updateTime = () => { const now = new Date(); const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' }; currentTimeEl.textContent = now.toLocaleDateString('vi-VN', options); }; updateTime(); setInterval(updateTime, 1000); };
        const showNotification = (message, isError = false) => { notificationText.textContent = message; notificationToast.className = `fixed bottom-5 right-5 text-white py-3 px-5 rounded-lg shadow-lg transition-all duration-300 ${isError ? 'bg-red-500' : 'bg-green-500'}`; notificationToast.classList.remove('opacity-0', 'translate-y-4'); setTimeout(() => { notificationToast.classList.add('opacity-0', 'translate-y-4'); }, 3000); };
        const showConfirm = (title, text) => { return new Promise((resolve) => { confirmModalTitle.textContent = title; confirmModalText.textContent = text; confirmModal.classList.remove('hidden'); const close = (result) => { confirmModal.classList.add('hidden'); resolve(result); }; confirmModalOk.onclick = () => close(true); confirmModalCancel.onclick = () => close(false); }); };
        
        // HÀM MỚI: Tự động tách ID từ Link
        const extractGoogleDriveId = (url) => {
            let id = null;
            const regexes = [
                /drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]{28,})/i,
                /drive\.google\.com\/uc\?id=([a-zA-Z0-9_-]{28,})/i
            ];
            for (const regex of regexes) {
                const match = url.match(regex);
                if (match && match[1]) {
                    id = match[1];
                    break;
                }
            }
            return id;
        };
        
        const renderAchievements = () => { achievementsListPublic.innerHTML = ''; achievementsListAdmin.innerHTML = ''; if (appState.achievements.length === 0) { const placeholder = '<div class="text-center text-slate-500 py-8"><p>Chưa có thành tích nào được thêm.</p></div>'; achievementsListPublic.innerHTML = placeholder; achievementsListAdmin.innerHTML = placeholder; return; } appState.achievements.forEach(ach => { if(!ach.imageId) return; const imageUrl = `https://drive.google.com/uc?id=${ach.imageId}`; const publicHtml = `<div class="card-style rounded-lg p-6 flex flex-col md:flex-row items-center gap-6"> <img src="${imageUrl}" alt="${ach.title}" class="w-full md:w-1/3 h-48 rounded-lg object-cover"> <div class="text-center md:text-left"> <h3 class="text-xl font-bold text-slate-800">${ach.title}</h3> <p class="text-slate-500 mt-2">${ach.description}</p> </div> </div>`; achievementsListPublic.innerHTML += publicHtml; const adminHtml = `<div class="flex items-start gap-4 p-2 border-b border-slate-200"> <img src="${imageUrl}" alt="${ach.title}" class="w-16 h-16 rounded-md object-cover flex-shrink-0"> <div class="flex-grow"> <h4 class="font-semibold text-slate-800">${ach.title}</h4> <p class="text-sm text-slate-500">${ach.description}</p> </div> <button data-id="${ach.id}" class="delete-achievement-btn text-slate-400 hover:text-red-500 p-1 flex-shrink-0" title="Xóa"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></button> </div>`; achievementsListAdmin.innerHTML += adminHtml; }); };
        const handleAddAchievement = (e) => { e.preventDefault(); const imageUrl = achievementImageUrlInput.value; const imageId = extractGoogleDriveId(imageUrl); if (!imageId) { showNotification('Link ảnh Google Drive không hợp lệ.', true); return; } const newAchievement = { id: Date.now(), title: achievementTitleInput.value, description: achievementDescriptionInput.value, imageId: imageId }; appState.achievements.unshift(newAchievement); saveStateToStorage(); renderAchievements(); achievementForm.reset(); showNotification('Đã thêm thành tích thành công!'); };
        const handleDeleteAchievement = async (achievementId) => { const confirmed = await showConfirm('Xóa thành tích?', 'Bạn có chắc chắn muốn xóa thành tích này không?'); if (confirmed) { appState.achievements = appState.achievements.filter(ach => ach.id !== achievementId); saveStateToStorage(); renderAchievements(); showNotification('Đã xóa thành tích.'); } };
        
        const renderTasks = () => { /* Giữ nguyên hàm renderTasks */ };
        const handleAddTask = (e) => { /* Giữ nguyên hàm handleAddTask */ };
        const handleDeleteTask = async (taskId) => { /* Giữ nguyên hàm handleDeleteTask */ };
        const handleToggleTask = (taskId) => { /* Giữ nguyên hàm handleToggleTask */ };
        const switchTab = (e) => { const tabId = e.currentTarget.dataset.tab; tabBtns.forEach(btn => btn.classList.remove('active')); tabPanes.forEach(pane => pane.classList.add('hidden')); e.currentTarget.classList.add('active'); document.getElementById(`${tabId}-content`).classList.remove('hidden'); };
        
        // Gán sự kiện
        showLoginBtn.addEventListener('click', showLoginModal); loginModalBackdrop.addEventListener('click', hideLoginModal); loginForm.addEventListener('submit', handleLogin); logoutBtn.addEventListener('click', handleLogout); document.body.addEventListener('click', e => { const deleteTaskBtn = e.target.closest('.delete-task-btn'); const deleteAchieveBtn = e.target.closest('.delete-achievement-btn'); if (deleteTaskBtn) handleDeleteTask(parseInt(deleteTaskBtn.dataset.id)); if (deleteAchieveBtn) handleDeleteAchievement(parseInt(deleteAchieveBtn.dataset.id)); }); document.body.addEventListener('change', e => { if (e.target.closest('input[type=checkbox]')) handleToggleTask(e.target.dataset.id); }); taskFilters.addEventListener('click', e => { if (e.target.tagName === 'BUTTON') { taskFilters.querySelector('.active').classList.remove('active'); e.target.classList.add('active'); currentFilter = e.target.dataset.filter; renderTasks(); }});
        tabBtns.forEach(btn => btn.addEventListener('click', switchTab));
        taskForm.addEventListener('submit', handleAddTask);
        achievementForm.addEventListener('submit', handleAddAchievement);
        
        checkLoginState();
    });
    </script>
</body>
</html>
